# 任务 4: Few-Shot 示例设计文档

> 创建日期: 2026-02-17
> 状态: 待实现
> 对应章节: AI Engineering 5.1 In-Context Learning & 5.2 Provide Examples

## 1. 概述

### 1.1 目标
通过 Few-Shot Prompting（少样本提示）技术，为模型提供 3 个示例，使其学习：
- 统一的时间戳格式 (`HH:MM:SS`)
- 一致的输出风格
- 明确的边界处理方式

### 1.2 范围
应用于三个核心功能：
- 总结功能 (`SUMMARIZE_PROMPT_TEMPLATE`)
- 问答功能 (`CHAT_PROMPT_TEMPLATE`)
- 提取知识点功能 (`EXTRACT_CONCEPTS_PROMPT_TEMPLATE`)

## 2. 架构设计

### 2.1 实现方案
**方案选择：** 内联到 Prompt 模板中

**理由：**
1. 学习项目，简单直接最好
2. 不同功能的示例确实不同
3. 无需修改现有 Service 代码结构

### 2.2 文件变更

| 文件 | 操作 |
|------|------|
| `PromptConstants.java` | 修改 - 为三个模板添加 Few-Shot 示例 |
| `VideoServiceImpl.java` | 无变更 |
| `VideoController.java` | 无变更 |

## 3. 详细设计

### 3.1 总结功能 (SUMMARIZE_PROMPT_TEMPLATE)

```
【示例 1 - 标准总结】
字幕片段：
[00:00:05] 大家好，今天我们来聊聊人工智能的发展历程
[00:00:15] 从1956年达特茅斯会议开始，AI经历了多次起伏
[00:00:45] 现在的深度学习革命从2012年AlexNet开始

助手回答：
核心主题：人工智能发展历程概述
主要内容：
1. 1956年达特茅斯会议标志着AI诞生
2. AI发展经历了多次高潮与低谷
3. 2012年AlexNet开启了深度学习时代
关键结论：AI发展是螺旋式上升的过程

【示例 2 - 分段总结】
字幕片段：
[00:10:00] 第三章：Transformer架构详解
[00:10:30] 自注意力机制是核心创新
[00:15:00] 本章小结：Transformer改变了NLP格局

助手回答：
核心主题：Transformer架构原理
主要内容：
1. 自注意力机制解决了长距离依赖问题
2. 并行计算效率远超RNN
3. 成为现代大语言模型的基础架构
关键结论：理解Transformer是掌握现代AI的关键

【示例 3 - 边界处理】
字幕片段：
[00:00:00] 大家好
[00:00:02] 谢谢观看

助手回答：
视频内容过于简短，无法提取有效总结。
建议：提供更长、信息量更大的视频内容。

---
%s

---
基于以上视频字幕内容，请生成一份详细的总结，包含：
1. 核心主题（1-2 句话）
2. 主要内容要点（3-5 条）
3. 关键结论或建议

请严格参照上述示例的格式和风格。
```

### 3.2 问答功能 (CHAT_PROMPT_TEMPLATE)

```
【示例 1 - 直接回答】
字幕内容：...[00:05:20] 提示工程是与AI沟通的核心技能...
用户问题：什么是提示工程？

助手回答：
根据视频 [00:05:20] 处的内容，提示工程是与AI沟通的核心技能，
指通过设计和优化输入提示来引导AI模型产生期望输出的技术。

【示例 2 - 引用时间戳回答】
字幕内容：...[00:10:15] RAG全称是检索增强生成...
               [00:10:45] 它结合了检索系统和生成模型的优势...
用户问题：RAG是什么？有什么优势？

助手回答：
根据视频内容：
- [00:10:15] RAG全称是检索增强生成（Retrieval-Augmented Generation）
- [00:10:45] 它结合了检索系统和生成模型的优势

简单来说，RAG通过先检索相关信息，再让模型基于检索结果生成回答，
提高了回答的准确性和可追溯性。

【示例 3 - 边界处理】
字幕内容：...[00:02:00] 今天我们讨论机器学习的基础...
用户问题：视频里提到量子计算了吗？

助手回答：
视频中未提及量子计算。
视频主要讨论的是机器学习基础相关内容。

---
%s

---
用户问题：%s

请基于以上视频字幕回答问题。回答时：
1. 尽可能引用具体时间戳
2. 如果视频中没有相关内容，请直接说明"视频中未提及"
```

### 3.3 提取知识点功能 (EXTRACT_CONCEPTS_PROMPT_TEMPLATE)

```
【示例 1 - 标准JSON输出】
字幕内容：
[00:01:00] 今天讲解三个核心概念：提示工程、RAG和微调
[00:01:30] 提示工程是最基础也是最重要的技能
[00:03:00] RAG适合需要外部知识库的场景
[00:04:30] 微调则用于定制化模型行为

助手输出：
[
  {
    "timestampFrom": "00:01:30",
    "timestampTo": "00:02:30",
    "concept": "提示工程",
    "description": "与AI沟通的基础技能，通过优化输入获得更好输出"
  },
  {
    "timestampFrom": "00:03:00",
    "timestampTo": "00:04:00",
    "concept": "RAG技术",
    "description": "检索增强生成，结合外部知识库提升回答准确性"
  },
  {
    "timestampFrom": "00:04:30",
    "timestampTo": "00:05:30",
    "concept": "模型微调",
    "description": "通过特定数据集训练定制化模型行为"
  }
]

【示例 2 - 多知识点提取】
字幕内容：
[00:00:10] 本次课程涵盖AI工程化部署的完整流程
[00:01:00] 首先是模型选择，要考虑任务类型和资源限制
[00:03:00] 其次是提示模板设计，决定了模型输出质量
[00:05:00] 然后是向量数据库选型，影响检索效率
[00:07:00] 最后是监控和迭代，持续优化系统表现

助手输出：
[
  {
    "timestampFrom": "00:01:00",
    "timestampTo": "00:02:30",
    "concept": "模型选择",
    "description": "根据任务类型和资源限制选择合适的AI模型"
  },
  {
    "timestampFrom": "00:03:00",
    "timestampTo": "00:04:30",
    "concept": "提示模板",
    "description": "设计高质量提示模板以优化模型输出"
  },
  {
    "timestampFrom": "00:05:00",
    "timestampTo": "00:06:30",
    "concept": "向量数据库",
    "description": "选型影响RAG系统的检索效率和准确度"
  },
  {
    "timestampFrom": "00:07:00",
    "timestampTo": "00:08:30",
    "concept": "监控迭代",
    "description": "建立监控体系持续优化系统表现"
  }
]

【示例 3 - 边界处理】
字幕内容：
[00:00:00] 大家好，欢迎来到我的频道
[00:00:05] 今天天气真不错
[00:00:10] 记得点赞订阅哦

助手输出：
[]

说明：该字幕内容为开场寒暄，无明确知识点可提取。

---
%s

---
基于以上视频字幕内容，提取 5-10 个核心知识点。

【输出要求】
1. 必须输出纯 JSON 数组格式
2. 时间戳格式统一为 HH:MM:SS
3. 如果无明确知识点，输出空数组 []
4. 不要包含任何开场白或结束语

【字段说明】
- timestampFrom: 知识点开始时间
- timestampTo: 知识点结束时间
- concept: 知识点名称（不超过10字）
- description: 知识点描述（1-2句话）
```

## 4. 预期效果

实现后，模型输出将：

| 维度 | 改进点 |
|------|--------|
| 时间戳格式 | 统一为 `HH:MM:SS`，不再出现 `10:00` 或 `10m` 等不一致格式 |
| 输出风格 | 总结结构化、问答引用时间戳、JSON格式规范 |
| 边界处理 | 信息不足时给出清晰提示，而非编造内容 |

## 5. 验收标准

1. 三个 Prompt 模板各包含 3 个 Few-Shot 示例
2. 示例覆盖：标准场景、复杂场景、边界场景
3. 现有功能接口和调用方式不变
4. 模型输出格式一致性显著提升
